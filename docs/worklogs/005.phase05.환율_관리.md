# Worklog: Phase 05 - í™˜ìœ¨ ê´€ë¦¬

**ì‘ì—… ì¼ì**: 2025-10-30
**ì‘ì—… ì‹œê°„**: ì•½ 2ì‹œê°„
**ë‹´ë‹¹ì**: Claude Code
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## 1. ì‘ì—… ê°œìš”

Phase 05 ê³„íšì„œ(`docs/plans/005.phase05.í™˜ìœ¨_ê´€ë¦¬.md`)ì— ë”°ë¼ í™˜ìœ¨ ê´€ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. HQ Adminì´ ìˆ˜ë™ìœ¼ë¡œ í™˜ìœ¨ì„ ì…ë ¥í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆëŠ” UIì™€ APIë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

---

## 2. êµ¬í˜„ ë‚´ìš©

### 2.1 ìƒì„±ëœ íŒŒì¼ (ì´ 6ê°œ)

#### ğŸ“ Components (2ê°œ)
1. **components/exchange-rates/exchange-rates-list.tsx** (3.4KB)
   - í†µí™” ìŒë³„ ê·¸ë£¹í™” ê¸°ëŠ¥ (KRWâ†’VND, KRWâ†’CNY)
   - ìµœì‹  í™˜ìœ¨ ìë™ íŒì • ë° "Latest" ë°°ì§€ í‘œì‹œ
   - ë¹ˆ ìƒíƒœ UI ì²˜ë¦¬
   - ë‚ ì§œ ë° í™˜ìœ¨ í¬ë§·íŒ…

2. **components/exchange-rates/exchange-rate-form.tsx** (7.3KB)
   - í†µí™” ìŒ ì„ íƒ (Select ë“œë¡­ë‹¤ìš´)
   - í™˜ìœ¨ ì…ë ¥ (ì†Œìˆ˜ì  4ìë¦¬ê¹Œì§€)
   - ìœ íš¨ ë‚ ì§œ ì„ íƒ (date input)
   - ë…¸íŠ¸ ì…ë ¥ (ì„ íƒì‚¬í•­)
   - ìœ íš¨ì„± ê²€ì‚¬:
     - í™˜ìœ¨ > 0
     - from_currency â‰  to_currency
     - í•„ìˆ˜ í•„ë“œ ê²€ì¦
   - ì¤‘ë³µ ì—ëŸ¬ ì²˜ë¦¬ (UNIQUE constraint ìœ„ë°˜ ì‹œ)

#### ğŸ“„ Pages (2ê°œ)
3. **app/(dashboard)/exchange-rates/page.tsx** (1.8KB)
   - HQ_Admin ê¶Œí•œ ì²´í¬
   - í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ (ë‚ ì§œ ì—­ìˆœ ì •ë ¬)
   - "Add Exchange Rate" ë²„íŠ¼
   - ExchangeRatesList ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

4. **app/(dashboard)/exchange-rates/new/page.tsx** (1.0KB)
   - HQ_Admin ê¶Œí•œ ì²´í¬
   - "Back to Exchange Rates" ë²„íŠ¼
   - ExchangeRateForm ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

#### ğŸŒ API Routes (1ê°œ)
5. **app/api/exchange-rates/latest/route.ts** (1.2KB)
   - GET `/api/exchange-rates/latest?from=KRW&to=VND`
   - í˜„ì¬ ë‚ ì§œ ì´ì „ì˜ ìµœì‹  í™˜ìœ¨ ë°˜í™˜
   - Query parameter ê²€ì¦
   - 404 ì—ëŸ¬ ì²˜ë¦¬ (í™˜ìœ¨ ì—†ì„ ë•Œ)

#### ğŸ› ï¸ ìˆ˜ì •ëœ íŒŒì¼ (1ê°œ)
6. **lib/constants.ts**
   - `DollarSign` ì•„ì´ì½˜ import ì¶”ê°€
   - `navItems` ë°°ì—´ì— Exchange Rates ë©”ë‰´ ì¶”ê°€
   - ìœ„ì¹˜: Inventoryì™€ Sales ì‚¬ì´
   - ê¶Œí•œ: HQ_Adminë§Œ ì ‘ê·¼ ê°€ëŠ¥

---

## 3. ì£¼ìš” êµ¬í˜„ íŠ¹ì§•

### 3.1 í†µí™” ìŒ ê·¸ë£¹í™” ë¡œì§
```typescript
const groupedRates = exchangeRates.reduce((acc, rate) => {
  const pair = `${rate.from_currency} â†’ ${rate.to_currency}`
  if (!acc[pair]) acc[pair] = []
  acc[pair].push(rate)
  return acc
}, {} as Record<string, ExchangeRate[]>)
```

- í™˜ìœ¨ ëª©ë¡ì„ í†µí™” ìŒë³„ë¡œ ê·¸ë£¹í™”í•˜ì—¬ í‘œì‹œ
- ê° ê·¸ë£¹ ë‚´ì—ì„œ ë‚ ì§œ ì—­ìˆœ ì •ë ¬
- ê°€ë…ì„± í–¥ìƒ (KRWâ†’VND, KRWâ†’CNY ì„¹ì…˜ ë¶„ë¦¬)

### 3.2 ìµœì‹  í™˜ìœ¨ íŒì • ì•Œê³ ë¦¬ì¦˜
```typescript
const isLatest = (rate: ExchangeRate, allRates: ExchangeRate[]) => {
  const latest = allRates
    .filter(r =>
      r.from_currency === rate.from_currency &&
      r.to_currency === rate.to_currency
    )
    .sort((a, b) =>
      new Date(b.effective_date).getTime() -
      new Date(a.effective_date).getTime()
    )[0]
  return latest?.id === rate.id
}
```

- ë™ì¼ í†µí™” ìŒ ì¤‘ ê°€ì¥ ìµœê·¼ effective_dateë¥¼ ê°€ì§„ í™˜ìœ¨ íŒì •
- í•´ë‹¹ í™˜ìœ¨ì— ì´ˆë¡ìƒ‰ "Latest" ë°°ì§€ í‘œì‹œ
- ì‹œê°ì ìœ¼ë¡œ ìµœì‹  í™˜ìœ¨ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥

### 3.3 í™˜ìœ¨ ì…ë ¥ UI
```
1 KRW = [____] VND
```

- ì§ê´€ì ì¸ í™˜ìœ¨ ì…ë ¥ í¬ë§·
- í†µí™” ìŒ ì„ íƒ ì‹œ ì˜ˆì‹œ í‘œì‹œ
  - VND: "If 1 KRW = 18 VND, enter 18.0000"
  - CNY: "If 1 KRW = 0.0053 CNY, enter 0.0053"
- ì†Œìˆ˜ì  4ìë¦¬ ì§€ì› (step="0.0001")

### 3.4 ìœ íš¨ì„± ê²€ì‚¬
1. **í•„ìˆ˜ í•„ë“œ**: í†µí™” ìŒ, í™˜ìœ¨, ìœ íš¨ ë‚ ì§œ
2. **í™˜ìœ¨ ê°’**: 0ë³´ë‹¤ ì»¤ì•¼ í•¨
3. **í†µí™” ìŒ**: from_currencyì™€ to_currencyê°€ ë‹¬ë¼ì•¼ í•¨
4. **ì¤‘ë³µ ë°©ì§€**: (from, to, effective_date) UNIQUE constraint
   - ì¤‘ë³µ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

---

## 4. ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### 4.1 ì‚¬ìš©ëœ ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Database**: Supabase PostgreSQL (ì´ë¯¸ êµ¬í˜„ëœ `exchange_rates` í…Œì´ë¸” í™œìš©)
- **UI Components**: shadcn/ui (Button, Card, Table, Select, Badge, Input, Label, Textarea)
- **Icons**: lucide-react (DollarSign, Plus, ChevronLeft)
- **State Management**: React useState
- **Routing**: Next.js useRouter
- **Notifications**: useToast hook

### 4.2 ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
- **Server Component**: `createClient()` from `@/lib/supabase/server`
- **Client Component**: `createClient()` from `@/lib/supabase/client`
- **RLS (Row Level Security)**:
  - ì¡°íšŒ: ëª¨ë“  ì¸ì¦ëœ ì‚¬ìš©ì
  - ìˆ˜ì •: HQ_Adminë§Œ ê°€ëŠ¥ (RLS ì •ì±…ìœ¼ë¡œ ê°•ì œë¨)

### 4.3 ê¶Œí•œ ê´€ë¦¬
```typescript
// í˜ì´ì§€ë§ˆë‹¤ ê¶Œí•œ ì²´í¬
const { data: userData } = await supabase
  .from('users')
  .select('role')
  .eq('id', user.id)
  .single()

if (userData?.role !== 'HQ_Admin') {
  redirect('/dashboard')
}
```

- ëª¨ë“  í™˜ìœ¨ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ HQ_Admin ê¶Œí•œ ê²€ì¦
- ë¹„ì¸ê°€ ì‚¬ìš©ìëŠ” ìë™ìœ¼ë¡œ Dashboardë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ë„ HQ_Adminì—ê²Œë§Œ í‘œì‹œ

---

## 5. API ì—”ë“œí¬ì¸íŠ¸

### GET `/api/exchange-rates/latest`

**Query Parameters:**
- `from`: ì¶œë°œ í†µí™” (ì˜ˆ: KRW)
- `to`: ë„ì°© í†µí™” (ì˜ˆ: VND)

**Response (Success - 200):**
```json
{
  "exchangeRate": {
    "id": "uuid",
    "from_currency": "KRW",
    "to_currency": "VND",
    "rate": 18.0000,
    "effective_date": "2025-10-30",
    "notes": "...",
    "created_at": "2025-10-30T05:00:00Z",
    "updated_at": "2025-10-30T05:00:00Z"
  }
}
```

**Response (Not Found - 404):**
```json
{
  "error": "No exchange rate found for KRW â†’ VND"
}
```

**Response (Bad Request - 400):**
```json
{
  "error": "Missing from or to currency parameter"
}
```

**ì‚¬ìš© ì‚¬ë¡€:**
- Phase 06 (ê°€ê²© ê³„ì‚°)ì—ì„œ ìµœì‹  í™˜ìœ¨ ìë™ ë¶ˆëŸ¬ì˜¤ê¸°
- ê°€ê²© ì„¤ì • UIì—ì„œ í˜„ì¬ í™˜ìœ¨ í‘œì‹œ

---

## 6. ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 6.1 ë¹Œë“œ ì„±ê³µ
```bash
npm run build
```

**ê²°ê³¼:**
- âœ… TypeScript ì»´íŒŒì¼ ì„±ê³µ
- âœ… ESLint ê²€ì‚¬ í†µê³¼ (1ê°œ ê²½ê³ : react-hooks/exhaustive-deps, ê¸°ì¡´ íŒŒì¼)
- âœ… ì •ì  í˜ì´ì§€ ìƒì„± ì„±ê³µ (20/20)
- âœ… ìƒˆë¡œìš´ ë¼ìš°íŠ¸ ë“±ë¡ í™•ì¸:
  - `/exchange-rates` (1.88 kB)
  - `/exchange-rates/new` (4.5 kB)
  - `/api/exchange-rates/latest` (0 B)

### 6.2 ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

**ê²°ê³¼:**
- âœ… ì„œë²„ ì‹œì‘ ì„±ê³µ (http://localhost:3000)
- âœ… 2.5ì´ˆ ë§Œì— Ready
- âœ… í™˜ìœ¨ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
- âœ… ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì •ìƒ í‘œì‹œ

### 6.3 ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### âœ… UI í…ŒìŠ¤íŠ¸
- [x] í™˜ìœ¨ ëª©ë¡ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
- [x] í™˜ìœ¨ ì¶”ê°€ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
- [x] "Add Exchange Rate" ë²„íŠ¼ í‘œì‹œ
- [x] "Back to Exchange Rates" ë²„íŠ¼ ì‘ë™
- [x] ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ì— "Exchange Rates" í‘œì‹œ (DollarSign ì•„ì´ì½˜)

#### âœ… ë°ì´í„° í‘œì‹œ í…ŒìŠ¤íŠ¸
- [x] í†µí™” ìŒë³„ ê·¸ë£¹í™” (KRWâ†’VND, KRWâ†’CNY)
- [x] ë‚ ì§œ ì—­ìˆœ ì •ë ¬
- [x] í™˜ìœ¨ í¬ë§· (ì†Œìˆ˜ì  4ìë¦¬)
- [x] ë‚ ì§œ í¬ë§· (formatDate ìœ í‹¸ë¦¬í‹°)
- [x] ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ

#### âœ… í¼ ìœ íš¨ì„± ê²€ì‚¬
- [x] í†µí™” ìŒ ë¯¸ì„ íƒ ì‹œ ì—ëŸ¬
- [x] í™˜ìœ¨ ë¯¸ì…ë ¥ ì‹œ ì—ëŸ¬
- [x] í™˜ìœ¨ 0 ì´í•˜ ì‹œ ì—ëŸ¬
- [x] from_currency = to_currency ì‹œ ì—ëŸ¬
- [x] ì¤‘ë³µ í™˜ìœ¨ ì…ë ¥ ì‹œ ì—ëŸ¬ (UNIQUE constraint)

#### âœ… ê¶Œí•œ í…ŒìŠ¤íŠ¸
- [x] HQ_Adminë§Œ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
- [x] ë¹„ì¸ê°€ ì‚¬ìš©ì ë¦¬ë‹¤ì´ë ‰íŠ¸
- [x] RLS ì •ì±… ì ìš© (Supabase ë ˆë²¨)

#### âœ… API í…ŒìŠ¤íŠ¸
- [x] `/api/exchange-rates/latest?from=KRW&to=VND` í˜¸ì¶œ ê°€ëŠ¥
- [x] ìµœì‹  í™˜ìœ¨ ë°˜í™˜ (effective_date â‰¤ ì˜¤ëŠ˜)
- [x] Query parameter ëˆ„ë½ ì‹œ 400 ì—ëŸ¬
- [x] í™˜ìœ¨ ì—†ì„ ë•Œ 404 ì—ëŸ¬

---

## 7. ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©

### 7.1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- âœ… `exchange_rates` í…Œì´ë¸” ì´ë¯¸ ì¡´ì¬ (Migration 010)
- âœ… ì‹œë“œ ë°ì´í„° ì¡´ì¬ (KRWâ†’VND: 18.50, KRWâ†’CNY: 0.0052)
- âœ… RLS ì •ì±… ì„¤ì • ì™„ë£Œ

### 7.2 íƒ€ì… ì •ì˜
- âœ… `types/database.ts`ì— ExchangeRate íƒ€ì… ì •ì˜ë¨
- âœ… `types/index.ts`ì—ì„œ exportë¨
- âœ… ì»´í¬ë„ŒíŠ¸ì—ì„œ íƒ€ì… ì•ˆì „ì„± í™•ë³´

### 7.3 ìœ í‹¸ë¦¬í‹° ì¬ì‚¬ìš©
- âœ… `formatDate()` - ë‚ ì§œ í¬ë§·íŒ…
- âœ… `formatCurrency()` - í†µí™” í¬ë§·íŒ… (í–¥í›„ ì‚¬ìš© ê°€ëŠ¥)
- âœ… `CURRENCY_SYMBOLS` - í†µí™” ê¸°í˜¸ ìƒìˆ˜

### 7.4 UI ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©
- âœ… Button, Card, Table, Select, Badge, Input, Label, Textarea ëª¨ë‘ ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ í™œìš©
- âœ… useToast í›… ì¬ì‚¬ìš©
- âœ… ì¼ê´€ëœ UI/UX íŒ¨í„´ ìœ ì§€

---

## 8. Phase 05 ê³„íš ëŒ€ë¹„ ë‹¬ì„±ë„

### ê³„íšì„œ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### 3.1 í™˜ìœ¨ ê´€ë¦¬ UI
- [x] 3.1.1 í™˜ìœ¨ ëª©ë¡ í˜ì´ì§€
- [x] 3.1.2 í™˜ìœ¨ ëª©ë¡ ì»´í¬ë„ŒíŠ¸
- [x] 3.1.3 í™˜ìœ¨ ì¶”ê°€ í˜ì´ì§€
- [x] 3.1.4 í™˜ìœ¨ ì¶”ê°€ í¼

#### 3.2 ìµœì‹  í™˜ìœ¨ ì¡°íšŒ API
- [x] 3.2.1 ìµœì‹  í™˜ìœ¨ ì¡°íšŒ API Route

#### 4.1 í™˜ìœ¨ ì„ íƒ ì»´í¬ë„ŒíŠ¸ (ì„ íƒì‚¬í•­)
- [ ] exchange-rate-selector.tsx (Phase 06ì—ì„œ êµ¬í˜„ ì˜ˆì •)

**ë‹¬ì„±ë¥ : 5/6 í•­ëª© (83%)**

**ë¯¸êµ¬í˜„ í•­ëª©:**
- `exchange-rate-selector.tsx` - Phase 06 (ê°€ê²© ê³„ì‚°)ì—ì„œ ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬í˜„ ì˜ˆì •

---

## 9. ê°œì„  ì‚¬í•­ ë° ì¶”ê°€ ê¸°ëŠ¥

### 9.1 ê³„íš ëŒ€ë¹„ ê°œì„ ëœ ì 
1. **ë¹ˆ ìƒíƒœ UI ì¶”ê°€**
   - í™˜ìœ¨ ë°ì´í„°ê°€ ì—†ì„ ë•Œ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ í‘œì‹œ
   - "Add your first exchange rate to get started"

2. **ë…¸íŠ¸ í•„ë“œ ì¶”ê°€**
   - í™˜ìœ¨ ì…ë ¥ ì‹œ ì„ íƒì  ë…¸íŠ¸ ì…ë ¥ ê°€ëŠ¥
   - í™˜ìœ¨ ë³€ê²½ ì´ìœ  ê¸°ë¡ ê°€ëŠ¥

3. **ì¤‘ë³µ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ **
   - PostgreSQL ì—ëŸ¬ ì½”ë“œ(23505) ê°ì§€
   - ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

4. **ë°± ë²„íŠ¼ ì¶”ê°€**
   - í™˜ìœ¨ ì¶”ê°€ í˜ì´ì§€ì—ì„œ ëª©ë¡ìœ¼ë¡œ ì‰½ê²Œ ëŒì•„ê°€ê¸°
   - ChevronLeft ì•„ì´ì½˜ ì‚¬ìš©

### 9.2 í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­ (Post-MVP)
1. **í™˜ìœ¨ ìˆ˜ì • ê¸°ëŠ¥**
   - `/exchange-rates/[id]/edit` í˜ì´ì§€
   - ê¸°ì¡´ í™˜ìœ¨ ìˆ˜ì • UI

2. **í™˜ìœ¨ ì‚­ì œ ê¸°ëŠ¥**
   - ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
   - ì†Œí”„íŠ¸ ì‚­ì œ ë˜ëŠ” í•˜ë“œ ì‚­ì œ

3. **í™˜ìœ¨ íˆìŠ¤í† ë¦¬ ì°¨íŠ¸**
   - ì‹œê°„ì— ë”°ë¥¸ í™˜ìœ¨ ë³€ë™ ê·¸ë˜í”„
   - Recharts ë˜ëŠ” Chart.js í™œìš©

4. **ìë™ í™˜ìœ¨ ì—…ë°ì´íŠ¸**
   - Exchange Rate API ì—°ë™
   - Cron jobìœ¼ë¡œ ì¼ì¼ ìë™ ì—…ë°ì´íŠ¸

5. **í™˜ìœ¨ ì•Œë¦¼**
   - í™˜ìœ¨ ê¸‰ë³€ ì‹œ ì•Œë¦¼
   - ì¼ì • ë¹„ìœ¨ ì´ìƒ ë³€ë™ ì‹œ ê²½ê³ 

6. **í™˜ìœ¨ ë¹„êµ**
   - ì—¬ëŸ¬ ë‚ ì§œì˜ í™˜ìœ¨ ë¹„êµ í…Œì´ë¸”
   - ë³€ë™ë¥  ê³„ì‚° ë° í‘œì‹œ

---

## 10. ë‹¤ìŒ ë‹¨ê³„ (Phase 06 ì¤€ë¹„)

### 10.1 Phase 06: ê°€ê²© ê³„ì‚° ì—”ì§„
Phase 05ì—ì„œ êµ¬í˜„í•œ í™˜ìœ¨ ê´€ë¦¬ ê¸°ëŠ¥ì€ Phase 06ì˜ ê°€ê²© ê³„ì‚° ì—”ì§„ì—ì„œ í™œìš©ë©ë‹ˆë‹¤:

1. **í™˜ìœ¨ API ì—°ë™**
   - `/api/exchange-rates/latest` ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
   - ê°€ê²© ê³„ì‚° ì‹œ ìµœì‹  í™˜ìœ¨ ìë™ ë¶ˆëŸ¬ì˜¤ê¸°

2. **ê°€ê²© ê³„ì‚° ê³µì‹**
   ```
   Branch Cost (Local Currency) = (Purchase Price + Transfer Cost) / Exchange Rate
   Selling Price = Branch Cost / (1 - HQ Margin% - Branch Margin%)
   ```

3. **pricing_configs í…Œì´ë¸” ì—°ë™**
   - `exchange_rate` ì»¬ëŸ¼ì— ìµœì‹  í™˜ìœ¨ ì €ì¥
   - í™˜ìœ¨ ë³€ê²½ ì‹œ ê°€ê²© ì¬ê³„ì‚°

### 10.2 í•„ìš”í•œ ì‘ì—…
1. **exchange-rate-selector.tsx ì»´í¬ë„ŒíŠ¸ ìƒì„±**
   - ê°€ê²© ì„¤ì • í¼ì—ì„œ ì‚¬ìš©
   - "Refresh" ë²„íŠ¼ìœ¼ë¡œ ìµœì‹  í™˜ìœ¨ ë¶ˆëŸ¬ì˜¤ê¸°
   - ìˆ˜ë™ ì…ë ¥ë„ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

2. **ê°€ê²© ê³„ì‚°ê¸° UI**
   - ì…ë ¥: êµ¬ë§¤ ë‹¨ê°€, ì´ì „ ë¹„ìš©, ë§ˆì§„, í™˜ìœ¨
   - ì¶œë ¥: ì§€ì‚¬ ì›ê°€, íŒë§¤ ê°€ê²©
   - ì‹¤ì‹œê°„ ê³„ì‚° ë° ë¯¸ë¦¬ë³´ê¸°

---

## 11. í•™ìŠµ ë° ì¸ì‚¬ì´íŠ¸

### 11.1 ê¸°ìˆ ì  í•™ìŠµ
1. **PostgreSQL UNIQUE Constraint ì²˜ë¦¬**
   - ì—ëŸ¬ ì½”ë“œ 23505 ê°ì§€ ë° ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ë³€í™˜
   - ì¤‘ë³µ ë°ì´í„° ë°©ì§€ì˜ ì¤‘ìš”ì„±

2. **React ë°°ì—´ ê·¸ë£¹í™” íŒ¨í„´**
   - `reduce()` ë©”ì„œë“œë¡œ íš¨ìœ¨ì ì¸ ê·¸ë£¹í™”
   - í†µí™” ìŒë³„ ì„¹ì…˜ ë¶„ë¦¬ë¡œ ê°€ë…ì„± í–¥ìƒ

3. **Next.js Server/Client Component íŒ¨í„´**
   - Server Componentë¡œ ë°ì´í„° fetch (page.tsx)
   - Client Componentë¡œ ì¸í„°ë™ì…˜ ì²˜ë¦¬ (form, list)
   - ì ì ˆí•œ ì—­í•  ë¶„ë¦¬

### 11.2 UI/UX ì¸ì‚¬ì´íŠ¸
1. **ë¹ˆ ìƒíƒœì˜ ì¤‘ìš”ì„±**
   - ë°ì´í„°ê°€ ì—†ì„ ë•Œ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ ì•ˆë‚´ ì œê³µ
   - "Add your first..." ë©”ì‹œì§€ë¡œ ë‹¤ìŒ í–‰ë™ ìœ ë„

2. **ì‹œê°ì  í”¼ë“œë°±**
   - "Latest" ë°°ì§€ë¡œ ìµœì‹  í™˜ìœ¨ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥
   - ì´ˆë¡ìƒ‰ ë°°ì§€ë¡œ ì‹ ë¢°ê° ì œê³µ

3. **í¼ ìœ íš¨ì„± ê²€ì‚¬ ë©”ì‹œì§€**
   - êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë¡œ ì‚¬ìš©ì í˜¼ë€ ë°©ì§€
   - ì˜ˆì‹œ ì œê³µìœ¼ë¡œ ì…ë ¥ ê°€ì´ë“œ

---

## 12. íŒŒì¼ êµ¬ì¡° ìš”ì•½

```
coloco_Inventory management/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â””â”€â”€ exchange-rates/
â”‚   â”‚       â”œâ”€â”€ page.tsx (ëª©ë¡ í˜ì´ì§€)
â”‚   â”‚       â””â”€â”€ new/
â”‚   â”‚           â””â”€â”€ page.tsx (ì¶”ê°€ í˜ì´ì§€)
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ exchange-rates/
â”‚           â””â”€â”€ latest/
â”‚               â””â”€â”€ route.ts (ìµœì‹  í™˜ìœ¨ API)
â”œâ”€â”€ components/
â”‚   â””â”€â”€ exchange-rates/
â”‚       â”œâ”€â”€ exchange-rates-list.tsx (ëª©ë¡ ì»´í¬ë„ŒíŠ¸)
â”‚       â””â”€â”€ exchange-rate-form.tsx (í¼ ì»´í¬ë„ŒíŠ¸)
â””â”€â”€ lib/
    â””â”€â”€ constants.ts (ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ìˆ˜ì •)
```

---

## 13. ê´€ë ¨ ë¬¸ì„œ

- **ê³„íšì„œ**: `docs/plans/005.phase05.í™˜ìœ¨_ê´€ë¦¬.md`
- **ë°ì´í„°ë² ì´ìŠ¤**: `supabase/migrations/010_create_exchange_rates_table.sql`
- **ì‹œë“œ ë°ì´í„°**: `supabase/seed_data.sql` (lines 414-450)
- **íƒ€ì… ì •ì˜**: `types/database.ts`, `types/index.ts`
- **í”„ë¡œì íŠ¸ ê°€ì´ë“œ**: `CLAUDE.md`

---

## 14. ì»¤ë°‹ ë©”ì‹œì§€ (ì œì•ˆ)

```
Add: Phase 05 - Exchange Rates Management Implementation

- Create exchange rates list and form components
- Add exchange rates pages (/exchange-rates, /exchange-rates/new)
- Implement latest exchange rate API endpoint
- Add Exchange Rates to navigation menu (HQ_Admin only)
- Support currency pair grouping (KRWâ†’VND, KRWâ†’CNY)
- Display "Latest" badge on most recent rates
- Validate input: rate > 0, unique constraint handling
- Integrate with existing exchange_rates table and RLS policies

Files:
- components/exchange-rates/exchange-rates-list.tsx
- components/exchange-rates/exchange-rate-form.tsx
- app/(dashboard)/exchange-rates/page.tsx
- app/(dashboard)/exchange-rates/new/page.tsx
- app/api/exchange-rates/latest/route.ts
- lib/constants.ts (updated navItems)

ğŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## 15. ê²°ë¡ 

Phase 05 í™˜ìœ¨ ê´€ë¦¬ ê¸°ëŠ¥ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼:**
- âœ… 6ê°œ íŒŒì¼ ìƒì„± (ì»´í¬ë„ŒíŠ¸ 2ê°œ, í˜ì´ì§€ 2ê°œ, API 1ê°œ, ìˆ˜ì • 1ê°œ)
- âœ… í†µí™” ìŒë³„ ê·¸ë£¹í™” ë° ìµœì‹  í™˜ìœ¨ í‘œì‹œ
- âœ… HQ_Admin ì „ìš© ê¸°ëŠ¥ (ê¶Œí•œ ì²´í¬)
- âœ… ë¹Œë“œ ì„±ê³µ ë° ê°œë°œ ì„œë²„ ì •ìƒ ì‘ë™
- âœ… ìœ íš¨ì„± ê²€ì‚¬ ë° ì—ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ
- âœ… Phase 06 (ê°€ê²© ê³„ì‚°)ì„ ìœ„í•œ ì¤€ë¹„ ì™„ë£Œ

**ì†Œìš” ì‹œê°„:** ì•½ 2ì‹œê°„ (ê³„íš: 3ì¼)
**ì˜ˆìƒ ëŒ€ë¹„:** 67% ì‹œê°„ ë‹¨ì¶• (ê¸°ì¡´ íŒ¨í„´ ì¬ì‚¬ìš© ë° ëª…í™•í•œ ê³„íš ë•ë¶„)

ë‹¤ìŒ Phase 06ì—ì„œëŠ” ì´ í™˜ìœ¨ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ê°€ê²© ê³„ì‚° ì—”ì§„ì„ êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.

---

**ì‘ì„±ì¼**: 2025-10-30
**ì‘ì„±ì**: Claude Code
**ë¬¸ì„œ ë²„ì „**: 1.0
